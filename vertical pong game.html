<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vertical Pong</title>
<style>
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  background: linear-gradient(135deg, #e0f7ff, #a0c4ff);
  text-align: center;
  color: #222;
}
canvas {
  display: block;
  margin: 20px auto;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
  background: #0b3d91;
}
button {
  margin: 5px;
  padding: 10px 18px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 8px;
  border: none;
  background: #2196F3;
  color: white;
  transition: 0.3s;
}
button:hover { background: #1976D2; }
#levelPopup, #helpText {
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
}
#levelPopup button, #helpBtn { background: #00bcd4; }
#levelPopup button:hover, #helpBtn:hover { background: #0097a7; }
#helpBtn { font-size: 20px; width: 40px; height: 40px; }
</style>
</head>
<body>
<h1>Vertical Pong</h1>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<p id="score">Player: 0 | Computer: 0 | Level: 1</p>
<button id="playPauseBtn">Play</button>
<button onclick="window.open('https://chat.openai.com/', '_blank')">Open Chat History</button>
<p id="result" style="font-size:20px; font-weight:bold;"></p>

<div id="levelPopup">
  <strong>Choose Level</strong>
  <button onclick="setLevel(1)">Level 1</button>
  <button onclick="setLevel(2)">Level 2</button>
  <button onclick="setLevel(3)">Level 3</button>
</div>

<button id="helpBtn">?</button>
<div id="helpText">
  <strong>How to Play:</strong>
  <ul>
    <li>Use <b>Left</b> and <b>Right</b> arrow keys to move your paddle.</li>
    <li>Hit the ball with your paddle. Moving while hitting increases speed.</li>
    <li>First to 10 points wins.</li>
    <li>Select levels 1-3 for difficulty.</li>
    <li>Computer paddle moves automatically.</li>
  </ul>
</div>

<audio id="hitSound" src="https://www.soundjay.com/button/beep-07.wav"></audio>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const playPauseBtn = document.getElementById("playPauseBtn");
const resultText = document.getElementById("result");
const helpBtn = document.getElementById("helpBtn");
const helpText = document.getElementById("helpText");
const hitSound = document.getElementById("hitSound");

let paddleWidth = 80, paddleHeight = 12;
let playerX = canvas.width/2 - paddleWidth/2, playerPrevX = playerX;
const playerY = canvas.height - 30;

let computerX = canvas.width/2 - paddleWidth/2, computerPrevX = computerX;
const computerY = 20;

let ballX = canvas.width/2, ballY = canvas.height/2;
let ballSpeedX = 3, ballSpeedY = 3, ballRadius = 10;

let rightPressed=false, leftPressed=false;
let playerScore=0, computerScore=0, level=1;
const winScore = 10;
let playing=false, gameOver=false;
const speeds = {1:{ball:3, ai:2},2:{ball:4, ai:3},3:{ball:5, ai:4}};

document.addEventListener("keydown", e=>{
  if(e.key==="ArrowRight") rightPressed=true;
  if(e.key==="ArrowLeft") leftPressed=true;
});
document.addEventListener("keyup", e=>{
  if(e.key==="ArrowRight") rightPressed=false;
  if(e.key==="ArrowLeft") leftPressed=false;
});

helpBtn.addEventListener("click", ()=>{
  helpText.style.display = helpText.style.display === "none" ? "block" : "none";
  if(helpText.style.display === "block") { playing=false; playPauseBtn.innerText="Play"; }
});

playPauseBtn.addEventListener("click", ()=>{
  if(gameOver) resetGame();
  playing=!playing;
  playPauseBtn.innerText = playing?"Pause":"Play";
});

function setLevel(lv){ level=lv; resetBall(); }

function drawPaddle(x,y){
  ctx.fillStyle = "#00bcd4";
  ctx.shadowColor = "#00f";
  ctx.shadowBlur = 15;
  ctx.fillRect(x,y,paddleWidth,paddleHeight);
  ctx.shadowBlur = 0;
}

function drawBall(){
  let gradient = ctx.createRadialGradient(ballX, ballY, 2, ballX, ballY, ballRadius);
  gradient.addColorStop(0, "#fff");
  gradient.addColorStop(1, "#ff4081");
  ctx.beginPath();
  ctx.arc(ballX, ballY, ballRadius, 0, Math.PI*2);
  ctx.fillStyle = gradient;
  ctx.fill();
  ctx.closePath();
}

function resetBall(){
  ballX=canvas.width/2; ballY=canvas.height/2;
  let speed = speeds[level].ball;
  ballSpeedX = (Math.random()>0.5?1:-1)*speed;
  ballSpeedY = (Math.random()>0.5?1:-1)*speed;
}

function resetGame(){
  playerScore=0; computerScore=0; gameOver=false;
  resultText.innerText=""; playPauseBtn.innerText="Play"; resetBall();
}

function update(){
  if(!playing || gameOver) return;

  if(rightPressed) playerX += 6; 
  if(leftPressed) playerX -= 6;
  if(playerX<0) playerX=0;
  if(playerX+paddleWidth>canvas.width) playerX=canvas.width-paddleWidth;
  let playerVel = playerX - playerPrevX;

  let compCenter = computerX + paddleWidth/2;
  const aiSpeed = speeds[level].ai;
  const errorMargin = 40 - level*10;
  if(Math.abs(ballX - compCenter) > errorMargin){
    if(compCenter<ballX) computerX+=aiSpeed;
    else computerX-=aiSpeed;
  }
  if(computerX<0) computerX=0;
  if(computerX+paddleWidth>canvas.width) computerX=canvas.width-paddleWidth;
  let computerVel = computerX - computerPrevX;

  if(ballSpeedY>0 && ballY+ballRadius >= playerY && ballY-ballRadius <= playerY+paddleHeight){
    if(ballX + ballRadius >= playerX && ballX - ballRadius <= playerX+paddleWidth){
      ballSpeedY = -Math.abs(ballSpeedY);
      ballSpeedX += playerVel*0.3;
      ballY = playerY - ballRadius;
      hitSound.play();
    }
  }

  if(ballSpeedY<0 && ballY-ballRadius <= computerY+paddleHeight && ballY+ballRadius >= computerY){
    if(ballX + ballRadius >= computerX && ballX - ballRadius <= computerX+paddleWidth){
      ballSpeedY = Math.abs(ballSpeedY);
      ballSpeedX += computerVel*0.3;
      ballY = computerY + paddleHeight + ballRadius;
      hitSound.play();
    }
  }

  ballX += ballSpeedX; ballY += ballSpeedY;

  if(ballX-ballRadius<0 || ballX+ballRadius>canvas.width){ ballSpeedX=-ballSpeedX; hitSound.play(); }
  if(ballY>canvas.height){ computerScore++; resetBall(); }
  if(ballY<0){ playerScore++; resetBall(); }

  if(playerScore>=winScore){ resultText.innerText="ðŸŽ‰ You Win!"; gameOver=true; playing=false; playPauseBtn.innerText="Restart"; }
  if(computerScore>=winScore){ resultText.innerText="ðŸ˜¢ You Lose!"; gameOver=true; playing=false; playPauseBtn.innerText="Restart"; }

  playerPrevX = playerX; computerPrevX = computerX;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPaddle(playerX,playerY);
  drawPaddle(computerX,computerY);
  drawBall();
  document.getElementById("score").innerText = `Player: ${playerScore} | Computer: ${computerScore} | Level: ${level}`;
}

function gameLoop(){ update(); draw(); requestAnimationFrame(gameLoop); }

resetBall();
gameLoop();
</script>
</body>
</html>
